<div id="forms" class="page-layout simple fullwidth" fxLayout="column">
    <!-- CONTENT -->
    <div class="content p-24">

        <div fxLayout="column" fxLayoutAlign="center" fxLayout.gt-md="row">
            <div class="h2 mb-24">Edit Allergy</div>
            <button class="close_btn" title="Close" (click)="closePopup()">
                <mat-icon class="s-30 ml-4">close</mat-icon>
            </button>
        </div>

        <div class="mb-24" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">

            <form (ngSubmit)="myAllergy()" name="myAllergy" [formGroup]="allergyForm" novalidate class="mat-card mat-elevation-z4 p-24 mr-24"
                fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto">

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <mat-select placeholder="Allergy Type" formControlName="type" required>
                            <mat-option *ngFor="let const_allergyType of allergyTypeList" [value]="const_allergyType.allergyType_id">
                                {{const_allergyType.allergyType_value }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="allergyForm.get('type').hasError('required')">
                            Allergy Type is required
                        </mat-error>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <input matInput placeholder="Allergy name" formControlName="name">
                        <mat-error *ngIf="allergyForm.get('name').hasError('required')">
                            Allergy name is required
                        </mat-error>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <mat-select placeholder="Outcome" formControlName="outcome" required>
                            <mat-option *ngFor="let const_outcome of outcomeList" [value]="const_outcome.outcome_id">
                                {{const_outcome.outcome_value }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="allergyForm.get('outcome').hasError('required')">
                            Outcome is required
                        </mat-error>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <input matInput [matDatepicker]="beginDate" [max]="maxDate" placeholder="Choose Begin date"
                            formControlName="beginDate">
                        <mat-datepicker-toggle matSuffix [for]="beginDate"></mat-datepicker-toggle>
                        <mat-datepicker #beginDate></mat-datepicker>
                    </mat-form-field>
                    <br>
                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="70">
                        <input matInput [matDatepicker]="endDate" [max]="maxDate" placeholder="Choose end date"
                            formControlName="endDate">
                        <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                        <mat-datepicker #endDate></mat-datepicker>
                    </mat-form-field>
                    <div class="h4 pl-36"> ( Leave blank, if still active ) </div>
                    <br>
                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <mat-select placeholder="Occurrences" formControlName="occurrence" required>
                            <mat-option *ngFor="let const_occurrence of occurrenceList" [value]="const_occurrence.occurrence_id">
                                {{const_occurrence.occurrence_value }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="allergyForm.get('occurrence').hasError('required')">
                            Occurrences is required
                        </mat-error>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <mat-select placeholder="Severity" formControlName="severity" required>
                            <mat-option *ngFor="let const_severity of severityList" [value]="const_severity.severity_id">
                                {{const_severity.severity_value }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="allergyForm.get('severity').hasError('required')">
                            Occurrences is required
                        </mat-error>
                    </mat-form-field>

                </div>

                <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                    <mat-form-field fxFlex="100">
                        <mat-select placeholder="Reaction" formControlName="reaction" required>
                            <mat-option *ngFor="let const_reaction of reactionList" [value]="const_reaction.reaction_id">
                                {{const_reaction.reaction_value }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="allergyForm.get('reaction').hasError('required')">
                            Occurrences is required
                        </mat-error>
                    </mat-form-field>

                </div>


                <br>
                <div fxlayout="row" fxlayoutalign="start center">

                    <button mat-raised-button color="accent" class="submit-button" aria-label="SUBMIT" [disabled]="allergyForm.invalid">
                        SUBMIT
                    </button>
                    &nbsp;
                    <button mat-raised-button color="primary" type="button" class="button" aria-label="CANCEL" (click)="closePopup()">
                        CANCEL
                    </button>
                </div>

            </form>

            <!-- / REACTIVE FORM EXAMPLE -->

        </div>
    </div>

</div>